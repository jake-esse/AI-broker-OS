# AI-Broker MVP Environment Configuration
# Copy this file to .env and fill in your actual values

# ===============================================================================
# CORE SUPABASE CONFIGURATION
# ===============================================================================
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key

# ===============================================================================
# LLM CONFIGURATION
# ===============================================================================
# OpenAI API Key for email classification and extraction
OPENAI_API_KEY=sk-your_openai_api_key

# LLM Model to use (default: gpt-4o-mini)
LLM_MODEL=gpt-4o-mini

# ===============================================================================
# EMAIL PROVIDER OAUTH CREDENTIALS
# ===============================================================================

# Google OAuth (for Gmail integration)
# Get from: https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID=your_google_client_id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your_google_client_secret

# Microsoft OAuth (for Outlook/Exchange integration)
# Get from: https://portal.azure.com/#view/Microsoft_AAD_RegisteredApps
MICROSOFT_CLIENT_ID=your_microsoft_client_id
MICROSOFT_CLIENT_SECRET=your_microsoft_client_secret

# OAuth Redirect URI (your application's callback URL)
# Format: https://your-domain.com/auth/callback
OAUTH_REDIRECT_URI=http://localhost:3000/auth/callback

# ===============================================================================
# EMAIL SERVICES
# ===============================================================================

# Resend API for sending emails (missing info requests, confirmations)
# Get from: https://resend.com/api-keys
RESEND_API_KEY=re_your_resend_api_key

# Postmark API (if using for incoming webhooks - optional)
POSTMARK_API_KEY=your_postmark_api_key

# ===============================================================================
# WEBHOOK ENDPOINTS
# ===============================================================================

# Supabase Edge Function URLs for email webhooks
# Format: https://your-project.supabase.co/functions/v1/function-name
GMAIL_WEBHOOK_URL=https://your-project.supabase.co/functions/v1/webhook_gmail
OUTLOOK_WEBHOOK_URL=https://your-project.supabase.co/functions/v1/webhook_outlook

# Legacy Edge Function URL (for backward compatibility)
FN_CREATE_LOAD_URL=https://your-project.supabase.co/functions/v1/fn_create_load

# ===============================================================================
# EMAIL PROCESSING CONFIGURATION
# ===============================================================================

# Email processing confidence threshold (0.0 to 1.0)
EXTRACTION_CONFIDENCE_THRESHOLD=0.85

# Maximum retry attempts for failed email processing
MAX_PROCESSING_RETRIES=3

# IMAP polling interval in seconds (for non-webhook providers)
IMAP_POLL_INTERVAL=300

# ===============================================================================
# SECURITY CONFIGURATION
# ===============================================================================

# JWT Secret for webhook validation (generate random string)
WEBHOOK_JWT_SECRET=your_webhook_jwt_secret

# CORS allowed origins (comma-separated)
CORS_ALLOWED_ORIGINS=http://localhost:3000,https://your-app.com

# ===============================================================================
# OPTIONAL INTEGRATIONS
# ===============================================================================

# Twilio (for SMS notifications - optional)
TWILIO_ACCOUNT_SID=your_twilio_account_sid
TWILIO_AUTH_TOKEN=your_twilio_auth_token
TWILIO_PHONE_NUMBER=+1234567890

# Slack (for notifications - optional)
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/your/slack/webhook

# ===============================================================================
# PROVIDER-SPECIFIC CONFIGURATION
# ===============================================================================

# Gmail API Configuration
GMAIL_PUBSUB_TOPIC=projects/your-project/topics/gmail-push
GMAIL_PUBSUB_SUBSCRIPTION=gmail-webhook-sub

# Microsoft Graph Configuration
MICROSOFT_TENANT_ID=your_tenant_id  # Optional, use 'common' for multi-tenant

# IMAP Default Configuration (for custom email providers)
DEFAULT_IMAP_PORT=993
DEFAULT_IMAP_USE_TLS=true

# ===============================================================================
# DEVELOPMENT/TESTING CONFIGURATION
# ===============================================================================

# Environment (development, staging, production)
NODE_ENV=development

# Enable debug logging
DEBUG=true

# Test email addresses (comma-separated)
TEST_EMAIL_ADDRESSES=test@example.com,demo@freight.com

# ===============================================================================
# USAGE NOTES
# ===============================================================================
#
# 1. SECURITY: Never commit the actual .env file to version control
# 2. OAUTH SETUP: Configure redirect URIs in provider consoles to match OAUTH_REDIRECT_URI
# 3. WEBHOOKS: Ensure webhook URLs point to your deployed Supabase Edge Functions
# 4. TESTING: Use test email addresses for development and testing
# 5. PRODUCTION: Use strong, unique secrets and regularly rotate credentials
#
# ===============================================================================